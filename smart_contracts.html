
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Smart Contracts &#8212; web3j 4.1.0 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Application Binary Interface" href="abi.html" />
    <link rel="prev" title="Transactions" href="transactions.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
    <link rel="canonical" href="https://web3j.readthedocs.io/smart_contracts.html"/>
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="smart-contracts">
<h1>Smart Contracts<a class="headerlink" href="#smart-contracts" title="Permalink to this headline">¶</a></h1>
<p>Developers have the choice of three languages for writing smart contracts:</p>
<dl class="docutils">
<dt><a class="reference external" href="https://Solidity.readthedocs.io/">Solidity</a></dt>
<dd>The flagship language of Ethereum, and most popular language for smart contracts.</dd>
<dt><a class="reference external" href="https://github.com/ethereum/wiki/wiki/Serpent">Serpent</a></dt>
<dd>A Python like language for writing smart contracts.</dd>
<dt>LISP Like Language (LLL)</dt>
<dd>A low level language, Serpent provides a superset of LLL. There’s not a great deal of information
for working with LLL, the following blog <a class="reference external" href="http://blog.syrinx.net/">/var/log/syrinx</a> and
associated <a class="reference external" href="https://github.com/zigguratt/lll-resurrected">lll-resurrected GitHub</a> repository
is a good place to start.</dd>
</dl>
<p>In order to deploy a smart contract onto the Ethereum blockchain, it must first be compiled into
a bytecode format, then it can be sent as part of a transaction. web3j can do all of this for you
with its <a class="reference internal" href="#smart-contract-wrappers"><span class="std std-ref">Solidity smart contract wrappers</span></a>. To understand what is happening behind the scenes, you
can refer to the details in <a class="reference internal" href="transactions.html#creation-of-smart-contract"><span class="std std-ref">Creation of a smart contract</span></a>.</p>
<p>Given that Solidity is the language of choice for writing smart contracts, it is the language
supported by web3j, and is used for all subsequent examples.</p>
<div class="section" id="getting-started-with-solidity">
<h2>Getting started with Solidity<a class="headerlink" href="#getting-started-with-solidity" title="Permalink to this headline">¶</a></h2>
<p>An overview of Solidity is beyond the scope of these docs, however, the following resources are a
good place to start:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/ethereum/go-ethereum/wiki/Contract-Tutorial">Contract Tutorial</a> on the Go
Ethereum Wiki</li>
<li><a class="reference external" href="http://Solidity.readthedocs.io/en/develop/introduction-to-smart-contracts.html">Introduction to Smart Contracts</a>
in the Solidity project documentation</li>
<li><a class="reference external" href="https://ethereum-homestead.readthedocs.io/en/latest/contracts-and-transactions/contracts.html#writing-a-contract">Writing a contract</a>
in the Ethereum Homestead Guide</li>
</ul>
</div>
<div class="section" id="compiling-solidity-source-code">
<span id="compiling-solidity"></span><h2>Compiling Solidity source code<a class="headerlink" href="#compiling-solidity-source-code" title="Permalink to this headline">¶</a></h2>
<p>Compilation to bytecode is performed by the Solidity compiler, <em>solc</em>. You can install the compiler,
locally following the instructions as per
<a class="reference external" href="http://solidity.readthedocs.io/en/develop/installing-solidity.html">the project documentation</a>.</p>
<p>To compile the Solidity code run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ solc &lt;contract&gt;.sol --bin --abi --optimize -o &lt;output-dir&gt;/
</pre></div>
</div>
<p>The <em>–bin</em> and <em>–abi</em> compiler arguments are both required to take full advantage of working
with smart contracts from web3j.</p>
<dl class="docutils">
<dt><em>–bin</em></dt>
<dd>Outputs a Solidity binary file containing the hex-encoded binary to provide with the transaction
request. This is required only for <em>deploy</em> and <em>isValid</em> <a class="reference internal" href="#smart-contract-wrappers"><span class="std std-ref">Solidity smart contract wrappers</span></a> methods.</dd>
<dt><em>–abi</em></dt>
<dd>Outputs a Solidity <a class="reference internal" href="abi.html"><span class="doc">Application Binary Interface</span></a> (ABI) file which details all of the publicly
accessible contract methods and their associated parameters. These details along with the
contract address are crucial for interacting with smart contracts. The ABI file is also used for
the generation of <a class="reference internal" href="#smart-contract-wrappers"><span class="std std-ref">Solidity smart contract wrappers</span></a>.</dd>
</dl>
<p>There is also a <em>–gas</em> argument for providing estimates of the <a class="reference internal" href="transactions.html#gas"><span class="std std-ref">Gas</span></a> required to create a
contract and transact with its methods.</p>
<p>Alternatively, you can write and compile Solidity code in your browser via the
<a class="reference external" href="https://ethereum.github.io/browser-solidity/">browser-solidity</a> project. browser-solidity is
great for smaller smart contracts, but you may run into issues working with larger contracts.</p>
<p>You can also compile Solidity code via Ethereum clients such as Geth and Parity, using the JSON-RPC
method <a class="reference external" href="https://github.com/ethereum/wiki/wiki/JSON-RPC#eth_compileSolidity">eth_compileSolidity</a>
which is also supported in web3j. However, the Solidity compiler must be installed on the client
for this to work.</p>
<p>There are further options available, please refer to the
<a class="reference external" href="https://ethereum-homestead.readthedocs.io/en/latest/contracts-and-transactions/contracts.html#compiling-a-contract">relevant section</a>
in the Homestead documentation.</p>
</div>
<div class="section" id="deploying-and-interacting-with-smart-contracts">
<h2>Deploying and interacting with smart contracts<a class="headerlink" href="#deploying-and-interacting-with-smart-contracts" title="Permalink to this headline">¶</a></h2>
<p>If you want to avoid the underlying implementation detail for working with smart contracts, web3j
provides <a class="reference internal" href="#smart-contract-wrappers"><span class="std std-ref">Solidity smart contract wrappers</span></a> which enable you to interact directly with all of a smart
contract’s methods via a generated wrapper object.</p>
<p>Alternatively, if you wish to send regular transactions or have more control over your
interactions with your smart contracts, please refer to the sections
<a class="reference internal" href="transactions.html#creation-of-smart-contract"><span class="std std-ref">Creation of a smart contract</span></a>, <a class="reference internal" href="transactions.html#transacting-with-contract"><span class="std std-ref">Transacting with a smart contract</span></a> and <a class="reference internal" href="transactions.html#querying-state"><span class="std std-ref">Querying the state of a smart contract</span></a>
for details.</p>
</div>
<div class="section" id="smart-contract-examples">
<h2>Smart contract examples<a class="headerlink" href="#smart-contract-examples" title="Permalink to this headline">¶</a></h2>
<p>web3j provides a number of smart contract examples in the project directory
<a class="reference external" href="https://github.com/web3j/web3j/tree/master/codegen/src/test/resources/solidity">codegen/src/test/resources/solidity</a></p>
<p>It also provides integration tests for demonstrating the deploying and working with those smart
contracts in the
<a class="reference external" href="https://github.com/web3j/web3j/tree/master/integration-tests/src/test/java/org/web3j/protocol/scenarios">integration-tests/src/test/java/org/web3j/protocol/scenarios</a>
module.</p>
<img alt="_images/smart_contract.png" src="_images/smart_contract.png" />
</div>
<div class="section" id="eip-20-ethereum-token-standard-smart-contract">
<span id="eip"></span><h2>EIP-20 Ethereum token standard smart contract<a class="headerlink" href="#eip-20-ethereum-token-standard-smart-contract" title="Permalink to this headline">¶</a></h2>
<p>There an Ethereum standard, <a class="reference external" href="https://github.com/ethereum/EIPs/issues/20">EIP-20</a>
which started off as an
<a class="reference external" href="https://github.com/ethereum/EIPs">Ethereum Improvement Proposal (EIP)</a>, that defines the
standard functions that a smart contract providing tokens should implement.</p>
<p>The EIP-20 standard provides function definitions, but does not provide an implementation example.
However, there is an implementation provided in
<a class="reference external" href="https://github.com/web3j/web3j/tree/master/codegen/src/test/resources/solidity/contracts">codegen/src/test/resources/solidity/contracts</a>,
which has been taken from ConsenSys’
<a class="reference external" href="https://github.com/ConsenSys/Tokens">Tokens project</a>.</p>
<p>Open Zepplin also provide an example implementation on
<a class="reference external" href="https://github.com/OpenZeppelin/zeppelin-solidity/tree/master/contracts/token">GitHub</a>.</p>
<p>There are two integration tests that have been written to fully demonstrate the functionality of
this token smart contract.</p>
<p><a class="reference external" href="https://github.com/web3j/web3j/tree/master/integration-tests/src/test/java/org/web3j/protocol/scenarios/HumanStandardTokenGeneratedIT.java">HumanStandardTokenGeneratedIT</a>
uses the generated
<a class="reference external" href="https://github.com/web3j/web3j/tree/master/integration-tests/src/test/java/org/web3j/generated/HumanStandardTokenGenerated.java">HumanStandardTokenGenerated</a>
<a class="reference internal" href="#smart-contract-wrappers"><span class="std std-ref">smart contract wrapper</span></a> to demonstrate this.</p>
<p>Alternatively, if you do not wish to use a smart contract wrapper and would like to work directly
with the underlying JSON-RPC calls, please refer to
<a class="reference external" href="https://github.com/web3j/web3j/tree/master/integration-tests/src/test/java/org/web3j/protocol/scenarios/HumanStandardTokenIT.java">HumanStandardTokenIT</a>.</p>
</div>
<div class="section" id="solidity-smart-contract-wrappers">
<span id="smart-contract-wrappers"></span><h2>Solidity smart contract wrappers<a class="headerlink" href="#solidity-smart-contract-wrappers" title="Permalink to this headline">¶</a></h2>
<p>web3j supports the auto-generation of smart contract function wrappers in Java from Solidity ABI
files.</p>
<p>The web3j <a class="reference internal" href="command_line.html"><span class="doc">Command Line Tools</span></a> tools ship with a command line utility for generating the smart contract function wrappers:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ web3j solidity generate <span class="o">[</span>-hV<span class="o">]</span> <span class="o">[</span>-jt<span class="o">]</span> <span class="o">[</span>-st<span class="o">]</span> -a<span class="o">=</span>&lt;abiFile&gt; <span class="o">[</span>-b<span class="o">=</span>&lt;binFile&gt;<span class="o">]</span> -o<span class="o">=</span>&lt;destinationFileDir&gt; -p<span class="o">=</span>&lt;packageName&gt;

   -h, --help                        Show this <span class="nb">help</span> message and exit.
   -V, --version                     Print version information and exit.
   -jt, --javaTypes                  use native java types. Default: <span class="nb">true</span>
   -st, --solidityTypes              use solidity types.
   -a, --abiFile<span class="o">=</span>&lt;abiFile&gt;           abi file with contract definition.
   -b, --binFile<span class="o">=</span>&lt;binFile&gt;           optional bin file with contract compiled code in order to generate deploy methods.
   -o, --outputDir<span class="o">=</span>&lt;destinationFileDir&gt; destination base directory.
   -p, --package<span class="o">=</span>&lt;packageName&gt;       base package name.
</pre></div>
</div>
<p>BinFile is required for <a class="reference internal" href="#contract-validity"><span class="std std-ref">Contract validity</span></a>.</p>
<p>In versions prior to 3.x of web3j, the generated smart contract wrappers used native Solidity
types. From web3j 3.x onwards, Java types are created by default. You can create Solidity types
using the <em>–solidityTypes</em> command line argument.</p>
<p>You can also generate the wrappers by calling the Java class directly:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>org.web3j.codegen.SolidityFunctionWrapperGenerator -b /path/to/&lt;smart-contract&gt;.bin -a /path/to/&lt;smart-contract&gt;.abi -o /path/to/src/main/java -p com.your.organisation.name
</pre></div>
</div>
<p>Where the <em>bin</em> and <em>abi</em> are obtained as per <a class="reference internal" href="#compiling-solidity"><span class="std std-ref">Compiling Solidity source code</span></a>.</p>
<p>The native Java to Solidity type conversions used are detailed in the <a class="reference internal" href="abi.html"><span class="doc">Application Binary Interface</span></a> section.</p>
<p>The smart contract wrappers support all common operations for working with smart contracts:</p>
<ul class="simple">
<li><a class="reference internal" href="#construction-and-deployment"><span class="std std-ref">Construction and deployment</span></a></li>
<li><a class="reference internal" href="#invoking-transactions"><span class="std std-ref">Invoking transactions and events</span></a></li>
<li><a class="reference internal" href="#constant-methods"><span class="std std-ref">Calling constant methods</span></a></li>
<li><a class="reference internal" href="#contract-validity"><span class="std std-ref">Contract validity</span></a></li>
</ul>
<p>Any method calls that requires an underlying JSON-RPC call to take place will return a Future to
avoid blocking.</p>
<p>web3j also supports the generation of Java smart contract function wrappers directly from
<a class="reference external" href="http://truffleframework.com/">Truffle’s</a>
<a class="reference external" href="https://github.com/trufflesuite/truffle/tree/develop/packages/truffle-contract-schema">Contract Schema</a>
via the <a class="reference internal" href="command_line.html"><span class="doc">Command Line Tools</span></a> utility.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ web3j truffle generate <span class="o">[</span>--javaTypes<span class="p">|</span>--solidityTypes<span class="o">]</span> /path/to/&lt;truffle-smart-contract-output&gt;.json -o /path/to/src/main/java -p com.your.organisation.name
</pre></div>
</div>
<p>And this also can be invoked by calling the Java class:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>org.web3j.codegen.TruffleJsonFunctionWrapperGenerator /path/to/&lt;truffle-smart-contract-output&gt;.json -o /path/to/src/main/java -p com.your.organisation.name
</pre></div>
</div>
<p>A wrapper generated this way ia “enhanced” to expose the per-network deployed address of the
contract.  These addresses are from the truffle deployment at the time the wrapper is generared.</p>
</div>
<div class="section" id="construction-and-deployment">
<span id="id1"></span><h2>Construction and deployment<a class="headerlink" href="#construction-and-deployment" title="Permalink to this headline">¶</a></h2>
<p>Construction and deployment of smart contracts happens with the <em>deploy</em> method:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">YourSmartContract</span> <span class="n">contract</span> <span class="o">=</span> <span class="n">YourSmartContract</span><span class="o">.</span><span class="na">deploy</span><span class="o">(</span>
        <span class="o">&lt;</span><span class="n">web3j</span><span class="o">&gt;,</span> <span class="o">&lt;</span><span class="n">credentials</span><span class="o">&gt;,</span> <span class="n">GAS_PRICE</span><span class="o">,</span> <span class="n">GAS_LIMIT</span><span class="o">,</span>
        <span class="o">[&lt;</span><span class="n">initialValue</span><span class="o">&gt;,]</span>
        <span class="o">&lt;</span><span class="n">param1</span><span class="o">&gt;,</span> <span class="o">...,</span> <span class="o">&lt;</span><span class="n">paramN</span><span class="o">&gt;).</span><span class="na">send</span><span class="o">();</span>
</pre></div>
</div>
<p>This will create a new instance of the smart contract on the Ethereum blockchain using the
supplied credentials, and constructor parameter values.</p>
<p>The <em>&lt;initialValue&gt;</em> parameter is only required if your smart contract accepts Ether on
construction. This requires the Solidity
<a class="reference external" href="http://solidity.readthedocs.io/en/develop/frequently-asked-questions.html?highlight=payable#how-do-i-initialize-a-contract-with-only-a-specific-amount-of-wei">payable</a>
modifier to be present in the contract.</p>
<p>It returns a new smart contract wrapper instance which contains the underlying address of the
smart contract. If you wish to construct an instance of a smart contract wrapper with an existing
smart contract, simply pass in it’s address:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">YourSmartContract</span> <span class="n">contract</span> <span class="o">=</span> <span class="n">YourSmartContract</span><span class="o">.</span><span class="na">load</span><span class="o">(</span>
        <span class="s">&quot;0x&lt;address&gt;|&lt;ensName&gt;&quot;</span><span class="o">,</span> <span class="n">web3j</span><span class="o">,</span> <span class="n">credentials</span><span class="o">,</span> <span class="n">GAS_PRICE</span><span class="o">,</span> <span class="n">GAS_LIMIT</span><span class="o">);</span>
</pre></div>
</div>
</div>
<div class="section" id="contract-validity">
<span id="id2"></span><h2>Contract validity<a class="headerlink" href="#contract-validity" title="Permalink to this headline">¶</a></h2>
<p>Using this method, you may want to ascertain that the contract address that you have loaded is the
smart contract that you expect. For this you can use the <em>isValid</em> smart contract method, which will
only return true if the deployed bytecode at the contract address matches the bytecode in the
smart contract wrapper.:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">contract</span><span class="o">.</span><span class="na">isValid</span><span class="o">();</span>  <span class="c1">// returns false if the contract bytecode does not match what&#39;s deployed</span>
                     <span class="c1">// at the provided address</span>
</pre></div>
</div>
<p>Note: Contract wrapper has to be generated with <em>–bin</em> for this to work.</p>
</div>
<div class="section" id="transaction-managers">
<span id="id3"></span><h2>Transaction Managers<a class="headerlink" href="#transaction-managers" title="Permalink to this headline">¶</a></h2>
<p>web3j provides a
<a class="reference external" href="https://github.com/web3j/web3j/blob/master/core/src/main/java/org/web3j/tx/TransactionManager.java">TransactionManager</a>
abstraction to control the manner you connect to Ethereum clients with. The default mechanism uses
web3j’s
<a class="reference external" href="https://github.com/web3j/web3j/blob/master/core/src/main/java/org/web3j/tx/RawTransactionManager.java">RawTransactionManager</a>
which works with Ethereum wallet files to sign transactions offline before submitting them to the
network.</p>
<p>However, you may wish to modify the transaction manager, which you can pass to the smart
contract deployment and creation methods instead of a credentials object, i.e.:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">YourSmartContract</span> <span class="n">contract</span> <span class="o">=</span> <span class="n">YourSmartContract</span><span class="o">.</span><span class="na">deploy</span><span class="o">(</span>
        <span class="o">&lt;</span><span class="n">web3j</span><span class="o">&gt;,</span> <span class="o">&lt;</span><span class="n">transactionManager</span><span class="o">&gt;,</span> <span class="n">GAS_PRICE</span><span class="o">,</span> <span class="n">GAS_LIMIT</span><span class="o">,</span>
        <span class="o">&lt;</span><span class="n">param1</span><span class="o">&gt;,</span> <span class="o">...,</span> <span class="o">&lt;</span><span class="n">paramN</span><span class="o">&gt;).</span><span class="na">send</span><span class="o">();</span>
</pre></div>
</div>
<p>In addition to the RawTransactionManager, web3j provides a
<a class="reference external" href="https://github.com/web3j/web3j/blob/master/src/main/java/org/web3j/tx/ClientTransactionManager.java">ClientTransactionManager</a>
which passes the responsibility of signing your transaction on to the Ethereum client you are
connecting to.</p>
<p>There is also a
<a class="reference external" href="https://github.com/web3j/web3j/blob/master/core/src/main/java/org/web3j/tx/ReadonlyTransactionManager.java">ReadonlyTransactionManager</a>
for when you only want to retrieve data from a smart contract, but not transact with it.</p>
</div>
<div class="section" id="specifying-the-chain-id-on-transactions-eip-155">
<h2>Specifying the Chain Id on Transactions (EIP-155)<a class="headerlink" href="#specifying-the-chain-id-on-transactions-eip-155" title="Permalink to this headline">¶</a></h2>
<p>The RawTransactionManager takes an optional <em>chainId</em> parameter to specify the chain id to be used
on transactions as per
<a class="reference external" href="https://github.com/ethereum/EIPs/issues/155">EIP-155</a>. This prevents transactions from one chain
being re-broadcast onto another chain, such as from Ropsten to Mainnet:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">TransactionManager</span> <span class="n">transactionManager</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RawTransactionManager</span><span class="o">(</span>
        <span class="n">web3j</span><span class="o">,</span> <span class="n">credentials</span><span class="o">,</span> <span class="n">ChainId</span><span class="o">.</span><span class="na">MAINNET</span><span class="o">);</span>
</pre></div>
</div>
<p>In order to avoid having to change config or code to specify which chain you are working with,
web3j’s default behaviour is to not specify chain ids on transactions to simplify working with the
library. However, the recommendation of the Ethereum community is to use them.</p>
<p>You can obtain the chain id of the network that your Ethereum client is connected to with the
following request:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">web3j</span><span class="o">.</span><span class="na">netVersion</span><span class="o">().</span><span class="na">send</span><span class="o">().</span><span class="na">getNetVersion</span><span class="o">();</span>
</pre></div>
</div>
</div>
<div class="section" id="transaction-receipt-processors">
<h2>Transaction Receipt Processors<a class="headerlink" href="#transaction-receipt-processors" title="Permalink to this headline">¶</a></h2>
<p>By default, when a new transaction is submitted by web3j to an Ethereum client, web3j will
continually poll the client until it receives a
<a class="reference external" href="https://github.com/web3j/web3j/blob/master/core/src/main/java/org/web3j/protocol/core/methods/response/TransactionReceipt.java">TransactionReceipt</a>,
indicating that the transaction has been added to the blockchain. If you are sending a number of
transactions asynchronously with web3j, this can result in a number of threads polling the client
concurrently.</p>
<p>To reduce this polling overhead, web3j provides configurable
<a class="reference external" href="https://github.com/web3j/web3j/blob/master/core/src/main/java/org/web3j/tx/response/TransactionReceiptProcessor.java">TransactionReceiptProcessors</a>.</p>
<p>There are a number of processors provided in web3j:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/web3j/web3j/blob/master/core/src/main/java/org/web3j/tx/response/PollingTransactionReceiptProcessor.java">PollingTransactionReceiptProcessor</a>
is the default processor used in web3j, which polls periodically for a transaction receipt for
each individual pending transaction.</li>
<li><a class="reference external" href="https://github.com/web3j/web3j/blob/master/core/src/main/java/org/web3j/tx/response/QueuingTransactionReceiptProcessor.java">QueuingTransactionReceiptProcessor</a>
has an internal queue of all pending transactions. It contains a worker that runs periodically
to query if a transaction receipt is available yet. If a receipt is found, a callback to the
client is invoked.</li>
<li><a class="reference external" href="https://github.com/web3j/web3j/blob/master/core/src/main/java/org/web3j/tx/response/NoOpProcessor.java">NoOpProcessor</a>
provides an
<a class="reference external" href="https://github.com/web3j/web3j/blob/master/core/src/main/java/org/web3j/tx/response/EmptyTransactionReceipt.java">EmptyTransactionReceipt</a>
to clients which only contains the transaction hash. This is for clients who do not want web3j
to perform any polling for a transaction receipt.</li>
</ul>
<p><strong>Note:</strong> the
<a class="reference external" href="https://github.com/web3j/web3j/blob/master/core/src/main/java/org/web3j/tx/response/EmptyTransactionReceipt.java">EmptyTransactionReceipt</a>
is also provided in the the initial response from the <a class="reference external" href="https://github.com/web3j/web3j/blob/master/core/src/main/java/org/web3j/tx/response/QueuingTransactionReceiptProcessor.java">QueuingTransactionReceiptProcessor</a>.
This allows the caller to have the transaction hash for the transaction that was submitted to the
network.</p>
<p>If you do not wish to use the default processor
(<a class="reference external" href="https://github.com/web3j/web3j/blob/master/core/src/main/java/org/web3j/tx/response/PollingTransactionReceiptProcessor.java">PollingTransactionReceiptProcessor</a>), you can
specify the transaction receipt processor to use as follows:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">TransactionReceiptProcessor</span> <span class="n">transactionReceiptProcessor</span> <span class="o">=</span>
        <span class="k">new</span> <span class="n">QueuingTransactionReceiptProcessor</span><span class="o">(</span><span class="n">web3j</span><span class="o">,</span> <span class="k">new</span> <span class="n">Callback</span><span class="o">()</span> <span class="o">{</span>
                 <span class="nd">@Override</span>
                 <span class="kd">public</span> <span class="kt">void</span> <span class="nf">accept</span><span class="o">(</span><span class="n">TransactionReceipt</span> <span class="n">transactionReceipt</span><span class="o">)</span> <span class="o">{</span>
                     <span class="c1">// process transactionReceipt</span>
                 <span class="o">}</span>

                 <span class="nd">@Override</span>
                 <span class="kd">public</span> <span class="kt">void</span> <span class="nf">exception</span><span class="o">(</span><span class="n">Exception</span> <span class="n">exception</span><span class="o">)</span> <span class="o">{</span>
                     <span class="c1">// handle exception</span>
                 <span class="o">}</span>
<span class="n">TransactionManager</span> <span class="n">transactionManager</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RawTransactionManager</span><span class="o">(</span>
        <span class="n">web3j</span><span class="o">,</span> <span class="n">credentials</span><span class="o">,</span> <span class="n">ChainId</span><span class="o">.</span><span class="na">MAINNET</span><span class="o">,</span> <span class="n">transactionReceiptProcessor</span><span class="o">);</span>
</pre></div>
</div>
<p>If you require further information, the
<a class="reference external" href="https://github.com/web3j/web3j/blob/master/integration-tests/src/test/java/org/web3j/protocol/scenarios/FastRawTransactionManagerIT.java">FastRawTransactionManagerIT</a>
demonstrates the polling and queuing approaches.</p>
</div>
<div class="section" id="invoking-transactions-and-events">
<span id="invoking-transactions"></span><h2>Invoking transactions and events<a class="headerlink" href="#invoking-transactions-and-events" title="Permalink to this headline">¶</a></h2>
<p>All transactional smart contract methods are named identically to their Solidity methods, taking
the same parameter values. Transactional calls do not return any values, regardless of the return
type specified on the method. Hence, for all transactional methods the
<a class="reference external" href="https://github.com/ethereum/wiki/wiki/JSON-RPC#eth_gettransactionreceipt">Transaction Receipt</a>
associated with the transaction is returned.:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">TransactionReceipt</span> <span class="n">transactionReceipt</span> <span class="o">=</span> <span class="n">contract</span><span class="o">.</span><span class="na">someMethod</span><span class="o">(</span>
             <span class="o">&lt;</span><span class="n">param1</span><span class="o">&gt;,</span>
             <span class="o">...).</span><span class="na">send</span><span class="o">();</span>
</pre></div>
</div>
<p>The transaction receipt is useful for two reasons:</p>
<ol class="arabic simple">
<li>It provides details of the mined block that the transaction resides in</li>
<li><a class="reference external" href="http://Solidity.readthedocs.io/en/develop/contracts.html?highlight=events#events">Solidity events</a>
that are called will be logged as part of the transaction, which can then be extracted</li>
</ol>
<p>Any events defined within a smart contract will be represented in the smart contract wrapper with
a method named <em>process&lt;Event Name&gt;Event</em>, which takes the Transaction Receipt and from this
extracts the indexed and non-indexed event parameters, which are returned decoded in an instance of
the
<a class="reference external" href="https://github.com/web3j/web3j/blob/master/abi/src/main/java/org/web3j/abi/EventValues.java">EventValues</a>
object.:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">EventValues</span> <span class="n">eventValues</span> <span class="o">=</span> <span class="n">contract</span><span class="o">.</span><span class="na">processSomeEvent</span><span class="o">(</span><span class="n">transactionReceipt</span><span class="o">);</span>
</pre></div>
</div>
<p>Alternatively you can use an Flowable filter instead which will listen for events associated with
the smart contract:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">contract</span><span class="o">.</span><span class="na">someEventFlowable</span><span class="o">(</span><span class="n">startBlock</span><span class="o">,</span> <span class="n">endBlock</span><span class="o">).</span>
        <span class="o">.</span><span class="na">subscribe</span><span class="o">(</span><span class="n">event</span> <span class="o">-&gt;</span> <span class="o">...);</span>
</pre></div>
</div>
<p>For more information on working with Flowable filters, refer to <a class="reference internal" href="filters.html"><span class="doc">Filters and Events</span></a>.</p>
<p><strong>Remember</strong> that for any indexed array, bytes and string Solidity parameter
types, a Keccak-256 hash of their values will be returned, see the
<a class="reference external" href="http://Solidity.readthedocs.io/en/latest/contracts.html#events">documentation</a>
for further information.</p>
</div>
<div class="section" id="calling-constant-methods">
<span id="constant-methods"></span><h2>Calling constant methods<a class="headerlink" href="#calling-constant-methods" title="Permalink to this headline">¶</a></h2>
<p>Constant methods are those that read a value in a smart contract, and do not alter the state of
the smart contract. These methods are available with the same method signature as the smart
contract they were generated from:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Type</span> <span class="n">result</span> <span class="o">=</span> <span class="n">contract</span><span class="o">.</span><span class="na">someMethod</span><span class="o">(&lt;</span><span class="n">param1</span><span class="o">&gt;,</span> <span class="o">...).</span><span class="na">send</span><span class="o">();</span>
</pre></div>
</div>
</div>
<div class="section" id="dynamic-gas-price-and-limit">
<span id="dynamic-gas"></span><h2>Dynamic gas price and limit<a class="headerlink" href="#dynamic-gas-price-and-limit" title="Permalink to this headline">¶</a></h2>
<p>When working with smart contracts you may want to specify different gas price and limit values
depending on the function being invoked. You can do that by creating your own
<a class="reference external" href="https://github.com/web3j/web3j/blob/master/core/src/main/java/org/web3j/tx/gas/ContractGasProvider.java">ContractGasProvider</a>
for the smart contract wrapper.</p>
<p>Every generated wrapper contains all smart contract method names listed as a constants, which
facilitates compilation-time matching via a <em>switch</em> statement.</p>
<p>For example, using the
<a class="reference external" href="https://github.com/web3j/web3j/blob/master/codegen/src/test/resources/solidity/greeter/Greeter.sol">Greeter</a>
contract:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Greeter</span> <span class="n">greeter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Greeter</span><span class="o">(...);</span>
<span class="n">greeter</span><span class="o">.</span><span class="na">setGasProvider</span><span class="o">(</span><span class="k">new</span> <span class="n">DefaultGasProvider</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">BigInteger</span> <span class="nf">getGasPrice</span><span class="o">(</span><span class="n">String</span> <span class="n">contractFunc</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">switch</span> <span class="o">(</span><span class="n">contractFunc</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">case</span> <span class="n">Greeter</span><span class="o">.</span><span class="na">FUNC_GREET</span><span class="o">:</span> <span class="k">return</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="mi">22_000_000_000L</span><span class="o">);</span>
            <span class="k">case</span> <span class="n">Greeter</span><span class="o">.</span><span class="na">FUNC_KILL</span><span class="o">:</span> <span class="k">return</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="mi">44_000_000_000L</span><span class="o">);</span>
            <span class="k">default</span><span class="o">:</span> <span class="k">throw</span> <span class="k">new</span> <span class="n">NotImplementedException</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">BigInteger</span> <span class="nf">getGasLimit</span><span class="o">(</span><span class="n">String</span> <span class="n">contractFunc</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">switch</span> <span class="o">(</span><span class="n">contractFunc</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">case</span> <span class="n">Greeter</span><span class="o">.</span><span class="na">FUNC_GREET</span><span class="o">:</span> <span class="k">return</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="mi">4_300_000</span><span class="o">);</span>
            <span class="k">case</span> <span class="n">Greeter</span><span class="o">.</span><span class="na">FUNC_KILL</span><span class="o">:</span> <span class="k">return</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="mi">5_300_000</span><span class="o">);</span>
            <span class="k">default</span><span class="o">:</span> <span class="k">throw</span> <span class="k">new</span> <span class="n">NotImplementedException</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">});</span>
</pre></div>
</div>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>Please refer to <a class="reference internal" href="#eip"><span class="std std-ref">EIP-20 Ethereum token standard smart contract</span></a>.</p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/web3j.png" alt="Logo"/>
    
    <h1 class="logo logo-name">web3j</h1>
    
  </a>
</p>



<p class="blurb">Lightweight Java library for integration with Ethereum clients</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=web3j&repo=web3j&type=star&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





    

<p>
<a class="badge" href="https://travis-ci.org/web3j/web3j">
    <img
        alt="https://secure.travis-ci.org/web3j/web3j.svg?branch=master"
        src="https://secure.travis-ci.org/web3j/web3j.svg?branch=master"
    />
</a>
</p>




    

<p>
<a class="badge" href="https://codecov.io/github/web3j/web3j">
    <img
    alt="https://codecov.io/github/web3j/web3j/coverage.svg?branch=master"
    src="https://codecov.io/github/web3j/web3j/coverage.svg?branch=master"
    />
</a>
</p>
<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="transactions.html">Transactions</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Smart Contracts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#getting-started-with-solidity">Getting started with Solidity</a></li>
<li class="toctree-l2"><a class="reference internal" href="#compiling-solidity-source-code">Compiling Solidity source code</a></li>
<li class="toctree-l2"><a class="reference internal" href="#deploying-and-interacting-with-smart-contracts">Deploying and interacting with smart contracts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#smart-contract-examples">Smart contract examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="#eip-20-ethereum-token-standard-smart-contract">EIP-20 Ethereum token standard smart contract</a></li>
<li class="toctree-l2"><a class="reference internal" href="#solidity-smart-contract-wrappers">Solidity smart contract wrappers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#construction-and-deployment">Construction and deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#contract-validity">Contract validity</a></li>
<li class="toctree-l2"><a class="reference internal" href="#transaction-managers">Transaction Managers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#specifying-the-chain-id-on-transactions-eip-155">Specifying the Chain Id on Transactions (EIP-155)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#transaction-receipt-processors">Transaction Receipt Processors</a></li>
<li class="toctree-l2"><a class="reference internal" href="#invoking-transactions-and-events">Invoking transactions and events</a></li>
<li class="toctree-l2"><a class="reference internal" href="#calling-constant-methods">Calling constant methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dynamic-gas-price-and-limit">Dynamic gas price and limit</a></li>
<li class="toctree-l2"><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="abi.html">Application Binary Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="rlp.html">Recursive Length Prefix</a></li>
<li class="toctree-l1"><a class="reference internal" href="filters.html">Filters and Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="command_line.html">Command Line Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="management_apis.html">Management APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="infura.html">Using Infura with web3j</a></li>
<li class="toctree-l1"><a class="reference internal" href="ens.html">Ethereum Name Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="trouble.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="projects.html">Projects using web3j</a></li>
<li class="toctree-l1"><a class="reference internal" href="companies.html">Companies using web3j</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="links.html">Links and Useful Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Thanks and Credits</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="transactions.html" title="previous chapter">Transactions</a></li>
      <li>Next: <a href="abi.html" title="next chapter">Application Binary Interface</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016-2018, Conor Svensson.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/smart_contracts.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/web3j/web3j" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-85710619-1']);
      _gaq.push(['_setDomainName', 'none']);
      _gaq.push(['_setAllowLinker', true]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    
  </body>
</html>